(function(e){function n(n){for(var o,s,c=n[0],a=n[1],u=n[2],g=0,d=[];g<c.length;g++)s=c[g],Object.prototype.hasOwnProperty.call(r,s)&&r[s]&&d.push(r[s][0]),r[s]=0;for(o in a)Object.prototype.hasOwnProperty.call(a,o)&&(e[o]=a[o]);l&&l(n);while(d.length)d.shift()();return i.push.apply(i,u||[]),t()}function t(){for(var e,n=0;n<i.length;n++){for(var t=i[n],o=!0,c=1;c<t.length;c++){var a=t[c];0!==r[a]&&(o=!1)}o&&(i.splice(n--,1),e=s(s.s=t[0]))}return e}var o={},r={app:0},i=[];function s(n){if(o[n])return o[n].exports;var t=o[n]={i:n,l:!1,exports:{}};return e[n].call(t.exports,t,t.exports,s),t.l=!0,t.exports}s.m=e,s.c=o,s.d=function(e,n,t){s.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:t})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,n){if(1&n&&(e=s(e)),8&n)return e;if(4&n&&"object"===typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(s.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var o in e)s.d(t,o,function(n){return e[n]}.bind(null,o));return t},s.n=function(e){var n=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(n,"a",n),n},s.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},s.p="/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],a=c.push.bind(c);c.push=n,c=c.slice();for(var u=0;u<c.length;u++)n(c[u]);var l=a;i.push([0,"chunk-vendors"]),t()})({0:function(e,n,t){e.exports=t("56d7")},"56d7":function(e,n,t){"use strict";t.r(n);t("e260"),t("e6cf"),t("cca6"),t("a79d");var o=t("7a23"),r={class:"body"};function i(e,n,t,i,s,c){var a=Object(o["j"])("start-page"),u=Object(o["j"])("opening-component");return Object(o["h"])(),Object(o["c"])("div",r,[s.play?Object(o["d"])("",!0):(Object(o["h"])(),Object(o["c"])(a,{key:0,onTogglePlay:c.togglePlay},null,8,["onTogglePlay"])),s.play?(Object(o["h"])(),Object(o["c"])(u,{key:1,onGameFinished:c.togglePlay},null,8,["onGameFinished"])):Object(o["d"])("",!0)])}var s={data:function(){return{play:!1}},methods:{togglePlay:function(){this.play=!this.play}}};s.render=i;var c=s,a=(t("9911"),{class:"game flex-center"}),u={class:"info p-1 m-4"},l={class:"middle"},g={class:"stats"},d=Object(o["f"])(" Your browser does not support the video tag. "),p={class:"cover flex-center"},h={class:"loader"},m=Object(o["g"])("span",null,null,-1),f=Object(o["g"])("span",null,null,-1),b=Object(o["g"])("span",null,null,-1),O={key:0};function j(e,n,t,r,i,s){return Object(o["h"])(),Object(o["c"])("section",a,[Object(o["n"])(Object(o["g"])("div",u,[Object(o["g"])("p",null,"Song: "+Object(o["k"])(i.currentSong.song),1),Object(o["g"])("p",null,"Artist: "+Object(o["k"])(i.currentSong.artist),1),Object(o["g"])("p",null,"Opening: "+Object(o["k"])(i.currentSong.opening),1)],512),[[o["m"],2==i.songLoop]]),Object(o["g"])("div",l,[Object(o["g"])("div",g,[Object(o["g"])("p",null,Object(o["k"])(i.currentSongNum)+"/"+Object(o["k"])(i.songs),1),Object(o["n"])(Object(o["g"])("p",null,Object(o["k"])(i.currentSong.animeName),513),[[o["m"],2==i.songLoop]]),Object(o["g"])("p",null,Object(o["k"])(i.songsCorrect),1)]),Object(o["g"])("div",{class:[{correctAnswer:i.correctAnswer},"video-container my-1"]},[Object(o["g"])("video",{onLoadeddata:n[1]||(n[1]=function(){return s.newDataLoaded.apply(s,arguments)}),style:i.songPlaying?"background: none":"background: white"},[i.songPlaying?(Object(o["h"])(),Object(o["c"])("source",{key:0,src:i.currentSong.link},null,8,["src"])):Object(o["d"])("",!0),d],36),Object(o["n"])(Object(o["g"])("div",p,[Object(o["n"])(Object(o["g"])("p",null,[Object(o["g"])("strong",null,Object(o["k"])(i.guessingTimeLeft),1)],512),[[o["m"],i.finishedLoading]]),Object(o["n"])(Object(o["g"])("div",h,[m,f,b],512),[[o["m"],!i.finishedLoading]])],512),[[o["m"],i.playerIsGuessing]])],2),Object(o["g"])("form",{class:"my-1",action:"",onSubmit:n[5]||(n[5]=Object(o["o"])((function(){}),["prevent"]))},[Object(o["n"])(Object(o["g"])("input",{"onUpdate:modelValue":n[2]||(n[2]=function(e){return i.userInput=e}),class:[{correctAnswer:i.correctAnswer},"guess-opening"],onFocus:n[3]||(n[3]=function(e){return i.showList=!0}),onBlur:n[4]||(n[4]=function(){return s.showListFalse.apply(s,arguments)}),type:"text",placeholder:"anime name",autofocus:""},null,34),[[o["l"],i.userInput]]),i.showList?(Object(o["h"])(),Object(o["c"])("div",O,[(Object(o["h"])(!0),Object(o["c"])(o["a"],null,Object(o["i"])(i.animeList,(function(e){return Object(o["h"])(),Object(o["c"])("div",{key:e},[Object(o["n"])(Object(o["g"])("p",{onClick:function(n){return i.userInput=e}},Object(o["k"])(e),9,["onClick"]),[[o["m"],s.filterResults(e)]])])})),128))])):Object(o["d"])("",!0)],32),i.gameFinished?(Object(o["h"])(),Object(o["c"])("button",{key:0,onClick:n[6]||(n[6]=function(){return s.refreshPage.apply(s,arguments)})},"Play Again")):Object(o["d"])("",!0)])])}t("4160"),t("caad"),t("d3b7"),t("2532"),t("159b"),t("96cf");var y=t("1da1"),v={props:[],data:function(){return{songList:[],animeList:[],songQueue:[],currentSong:{},songs:10,currentSongNum:0,songsCorrect:0,songPlaying:!1,finishedLoading:!1,songFinished:!1,guessingTime:20,songDuration:0,songRandomStartTime:0,songRandomEndTime:0,songLoop:1,playerIsGuessing:!0,guessingTimeLeft:20,userInput:"",correctAnswer:!1,showList:!1,gameFinished:!1}},mounted:function(){var e=this,n=function(){var n=Object(y["a"])(regeneratorRuntime.mark((function n(){var o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,fetch("https://api.jsonbin.io/b/5fa3626047077d298f5d2872/7");case 2:return o=n.sent,n.next=5,o.json();case 5:e.songList=n.sent,t(),e.chooseSong();case 8:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),t=function(){e.songList.forEach((function(n){e.animeList.includes(n.animeName)||e.animeList.push(n.animeName)})),e.animeList.sort()};n()},watch:{songLoop:function(e){this.gameFinished||(this.correctAnswer=!1,1==e&&(this.userInput=""),e>=3&&(this.finishedLoading=!1,this.songLoop=1,this.songPlaying=!1,this.chooseSong()),2==e&&(this.checkCorrectAnswer(),this.playOpening(),this.playerIsGuessing=!1))},currentSong:function(){var e=document.querySelector("video");e.load()},currentSongNum:function(e){this.songs<e&&(this.gameFinished=!0)}},methods:{refreshPage:function(){location.reload()},filterResults:function(e){return!!e.toLowerCase().includes(this.userInput.toLowerCase())},checkCorrectAnswer:function(){this.currentSong.animeName.toLowerCase()==this.userInput.toLowerCase()&&(this.correctAnswer=!0,this.songsCorrect++)},showListFalse:function(){var e=this;setTimeout((function(){e.showList=!1}),100)},randomInt:function(e,n){return Math.floor(Math.random()*(n-e+1)+e)},chooseSong:function(){this.songPlaying=!0,this.currentSongNum++;var e=0;do{e=this.randomInt(0,this.songList.length-1),this.songQueue.push(e),this.currentSong=this.songList[e]}while(!this.songQueue.includes(e))},playOpening:function(){var e=this;this.finishedLoading=!0,this.guessingTimeLeft=this.guessingTime;var n=document.querySelector("video");n.currentTime=this.songRandomStartTime,n.play();var t=setInterval((function(){n.currentTime>=e.songRandomEndTime&&(clearInterval(t),n.pause(),e.playerIsGuessing=!e.playerIsGuessing,e.songLoop++),e.guessingTimeLeft=e.songRandomEndTime-Math.floor(n.currentTime)}),1e3)},newDataLoaded:function(){this.getSongStats(),this.playOpening()},getSongStats:function(){var e=document.querySelector("Video");this.songDuration=e.duration,this.songRandomStartTime=this.randomInt(0,this.songDuration-22),this.songRandomEndTime=this.songRandomStartTime+this.guessingTime}}};v.render=j;var w=v,L={class:"start-screen flex-center"},S=Object(o["g"])("h1",{class:"my-1"},"Anime Opening Quiz",-1),k={name:"contact",method:"POST","data-netlify":"true","data-netlify-recaptcha":"true"},T={type:"hidden",name:"form-name",value:"contact"},P=Object(o["e"])('<h3>Want to request an opening?</h3><div class="form-control"><input type="text" name="anime" placeholder="anime name" required></div><div class="form-control"><input type="text" name="song" placeholder="song" required></div><div class="form-control"><input type="text" name="artist" placeholder="artist" required></div><div class="form-control"><input type="text" name="opening" placeholder="opening number" required></div><div class="form-control"><input type="text" name="artist" placeholder="link to mp4 file (use catbox.moe if possible)" required></div><input type="submit" value="Send" class="btn">',7);function x(e,n,t,r,i,s){var c=this;return Object(o["h"])(),Object(o["c"])("section",L,[S,Object(o["g"])("button",{onClick:n[1]||(n[1]=function(e){return c.$emit("toggle-play")}),class:"my-2"},"Play"),Object(o["g"])("form",k,[Object(o["n"])(Object(o["g"])("input",T,null,512),[[o["m"],!i.hidden]]),P])])}var I={data:function(){return{hidden:!0}}};I.render=x;var C=I,A=Object(o["b"])(c);A.component("opening-component",w),A.component("start-page",C),A.mount("#app")}});
//# sourceMappingURL=app.883a524c.js.map