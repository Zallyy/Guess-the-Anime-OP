(function(e){function t(t){for(var o,i,c=t[0],a=t[1],u=t[2],g=0,f=[];g<c.length;g++)i=c[g],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&f.push(r[i][0]),r[i]=0;for(o in a)Object.prototype.hasOwnProperty.call(a,o)&&(e[o]=a[o]);l&&l(t);while(f.length)f.shift()();return s.push.apply(s,u||[]),n()}function n(){for(var e,t=0;t<s.length;t++){for(var n=s[t],o=!0,c=1;c<n.length;c++){var a=n[c];0!==r[a]&&(o=!1)}o&&(s.splice(t--,1),e=i(i.s=n[0]))}return e}var o={},r={app:0},s=[];function i(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=o,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)i.d(n,o,function(t){return e[t]}.bind(null,o));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],a=c.push.bind(c);c.push=t,c=c.slice();for(var u=0;u<c.length;u++)t(c[u]);var l=a;s.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var o=n("7a23"),r={class:"body"};function s(e,t,n,s,i,c){var a=Object(o["i"])("start-page"),u=Object(o["i"])("opening-component");return Object(o["g"])(),Object(o["c"])("div",r,[i.play?Object(o["d"])("",!0):(Object(o["g"])(),Object(o["c"])(a,{key:0,onTogglePlay:c.togglePlay},null,8,["onTogglePlay"])),i.play?(Object(o["g"])(),Object(o["c"])(u,{key:1,onGameFinished:c.togglePlay},null,8,["onGameFinished"])):Object(o["d"])("",!0)])}var i={data:function(){return{play:!1}},methods:{togglePlay:function(){this.play=!this.play}}};i.render=s;var c=i,a=(n("9911"),{class:"game flex-center"}),u={class:"info p-1 m-4"},l={class:"middle"},g={class:"stats"},f=Object(o["e"])(" Your browser does not support the video tag. "),p={class:"cover flex-center"},d={class:"loader"},b=Object(o["f"])("span",null,null,-1),m=Object(o["f"])("span",null,null,-1),h=Object(o["f"])("span",null,null,-1),j={key:0};function O(e,t,n,r,s,i){return Object(o["g"])(),Object(o["c"])("section",a,[Object(o["m"])(Object(o["f"])("div",u,[Object(o["f"])("p",null,"Song: "+Object(o["j"])(s.currentSong.song),1),Object(o["f"])("p",null,"Artist: "+Object(o["j"])(s.currentSong.artist),1),Object(o["f"])("p",null,"Opening: "+Object(o["j"])(s.currentSong.opening),1)],512),[[o["l"],2==s.songLoop]]),Object(o["f"])("div",l,[Object(o["f"])("div",g,[Object(o["f"])("p",null,Object(o["j"])(s.currentSongNum)+"/"+Object(o["j"])(s.songs),1),Object(o["m"])(Object(o["f"])("p",null,Object(o["j"])(s.currentSong.animeName),513),[[o["l"],2==s.songLoop]]),Object(o["f"])("p",null,Object(o["j"])(s.songsCorrect),1)]),Object(o["f"])("div",{class:[{correctAnswer:s.correctAnswer},"video-container my-1"]},[Object(o["f"])("video",{onLoadeddata:t[1]||(t[1]=function(){return i.newDataLoaded.apply(i,arguments)}),style:s.songPlaying?"background: none":"background: white"},[s.songPlaying?(Object(o["g"])(),Object(o["c"])("source",{key:0,src:s.currentSong.link},null,8,["src"])):Object(o["d"])("",!0),f],36),Object(o["m"])(Object(o["f"])("div",p,[Object(o["m"])(Object(o["f"])("p",null,[Object(o["f"])("strong",null,Object(o["j"])(s.guessingTimeLeft),1)],512),[[o["l"],s.finishedLoading]]),Object(o["m"])(Object(o["f"])("div",d,[b,m,h],512),[[o["l"],!s.finishedLoading]])],512),[[o["l"],s.playerIsGuessing]])],2),Object(o["f"])("form",{class:"my-1 filterInput",action:"",onSubmit:t[5]||(t[5]=Object(o["n"])((function(){}),["prevent"]))},[Object(o["m"])(Object(o["f"])("input",{"onUpdate:modelValue":t[2]||(t[2]=function(e){return s.userInput=e}),class:[{correctAnswer:s.correctAnswer},"guess-opening"],onFocus:t[3]||(t[3]=function(e){return s.showList=!0}),onBlur:t[4]||(t[4]=function(){return i.showListFalse.apply(i,arguments)}),type:"text",placeholder:"anime name",autofocus:""},null,34),[[o["k"],s.userInput]]),s.showList?(Object(o["g"])(),Object(o["c"])("div",j,[(Object(o["g"])(!0),Object(o["c"])(o["a"],null,Object(o["h"])(s.animeList,(function(e){return Object(o["g"])(),Object(o["c"])("div",{key:e},[Object(o["m"])(Object(o["f"])("p",{onClick:function(t){return s.userInput=e}},Object(o["j"])(e),9,["onClick"]),[[o["l"],i.filterResults(e)]])])})),128))])):Object(o["d"])("",!0)],32),s.gameFinished?(Object(o["g"])(),Object(o["c"])("button",{key:0,onClick:t[6]||(t[6]=function(){return i.refreshPage.apply(i,arguments)})},"Play Again")):Object(o["d"])("",!0)])])}n("4160"),n("caad"),n("d3b7"),n("2532"),n("159b"),n("96cf");var y=n("1da1"),v={props:[],data:function(){return{songList:[],animeList:[],songQueue:[],currentSong:{},songs:10,currentSongNum:0,songsCorrect:0,songPlaying:!1,finishedLoading:!1,songFinished:!1,guessingTime:20,songDuration:0,songRandomStartTime:0,songRandomEndTime:0,songLoop:1,playerIsGuessing:!0,guessingTimeLeft:20,userInput:"",correctAnswer:!1,showList:!1,gameFinished:!1}},mounted:function(){var e=this,t=function(){var t=Object(y["a"])(regeneratorRuntime.mark((function t(){var o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://api.jsonbin.io/b/5fa3626047077d298f5d2872/7");case 2:return o=t.sent,t.next=5,o.json();case 5:e.songList=t.sent,n(),e.chooseSong();case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),n=function(){e.songList.forEach((function(t){e.animeList.includes(t.animeName)||e.animeList.push(t.animeName)})),e.animeList.sort()};t()},watch:{songLoop:function(e){this.gameFinished||(this.correctAnswer=!1,1==e&&(this.userInput=""),e>=3&&(this.finishedLoading=!1,this.songLoop=1,this.songPlaying=!1,this.chooseSong()),2==e&&(this.checkCorrectAnswer(),this.playOpening(),this.playerIsGuessing=!1))},currentSong:function(){var e=document.querySelector("video");e.load()},currentSongNum:function(e){this.songs<e&&(this.gameFinished=!0)}},methods:{refreshPage:function(){location.reload()},filterResults:function(e){return!!e.toLowerCase().includes(this.userInput.toLowerCase())},checkCorrectAnswer:function(){this.currentSong.animeName.toLowerCase()==this.userInput.toLowerCase()&&(this.correctAnswer=!0,this.songsCorrect++)},showListFalse:function(){var e=this;setTimeout((function(){e.showList=!1}),100)},randomInt:function(e,t){return Math.floor(Math.random()*(t-e+1)+e)},chooseSong:function(){this.songPlaying=!0,this.currentSongNum++;var e=0;do{e=this.randomInt(0,this.songList.length-1),this.songQueue.push(e),this.currentSong=this.songList[e]}while(!this.songQueue.includes(e))},playOpening:function(){var e=this;this.finishedLoading=!0,this.guessingTimeLeft=this.guessingTime;var t=document.querySelector("video");t.currentTime=this.songRandomStartTime,t.play();var n=setInterval((function(){t.currentTime>=e.songRandomEndTime&&(clearInterval(n),t.pause(),e.playerIsGuessing=!e.playerIsGuessing,e.songLoop++),e.guessingTimeLeft=e.songRandomEndTime-Math.floor(t.currentTime)}),1e3)},newDataLoaded:function(){this.getSongStats(),this.playOpening()},getSongStats:function(){var e=document.querySelector("Video");this.songDuration=e.duration,this.songRandomStartTime=this.randomInt(0,this.songDuration-22),this.songRandomEndTime=this.songRandomStartTime+this.guessingTime}}};v.render=O;var w=v,L={class:"start-screen flex-center"},S=Object(o["f"])("h1",{class:"my-1"},"Anime Opening Quiz",-1),T=Object(o["f"])("form",{class:"contact-form",name:"contact",method:"POST",netlify:"","netlify-honeypot":"bot-field"},[Object(o["f"])("h3",null,"Want to request an opening?"),Object(o["f"])("div",{class:"form-control"},[Object(o["f"])("input",{type:"text",name:"anime",placeholder:"anime name",required:""})]),Object(o["f"])("div",{class:"form-control"},[Object(o["f"])("input",{type:"text",name:"song",placeholder:"song",required:""})]),Object(o["f"])("div",{class:"form-control"},[Object(o["f"])("input",{type:"text",name:"artist",placeholder:"artist",required:""})]),Object(o["f"])("div",{class:"form-control"},[Object(o["f"])("input",{type:"text",name:"opening",placeholder:"opening number",required:""})]),Object(o["f"])("div",{class:"form-control"},[Object(o["f"])("input",{type:"text",name:"artist",placeholder:"link to mp4 file (use catbox.moe if possible)",required:""})]),Object(o["f"])("input",{type:"submit",value:"Send",class:"btn"})],-1);function P(e,t,n,r,s,i){var c=this;return Object(o["g"])(),Object(o["c"])("section",L,[S,Object(o["f"])("button",{onClick:t[1]||(t[1]=function(e){return c.$emit("toggle-play")}),class:"my-2"},"Play"),T])}var k={data:function(){return{hidden:!0}}};k.render=P;var x=k,I=Object(o["b"])(c);I.component("opening-component",w),I.component("start-page",x),I.mount("#app")}});
//# sourceMappingURL=app.eed5e2f4.js.map